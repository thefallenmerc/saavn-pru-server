(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{114:function(e,t,a){},115:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(18),r=a.n(l),s=a(35),c=a(20),i=a(14),m=a(3),u={unescape:function(e){var t=document.createElement("span");return t.innerHTML=e,t.innerText},formatSeconds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=parseInt(e/60).toString(),a=parseInt(e%60).toString();return t.length<2&&(t="0".repeat(2-t.length)+t),a.length<2&&(a="0".repeat(2-a.length)+a),t+":"+a},completionPercentage:function(e,t){return e/t*100},downloadJson:function(e,t){var a=document.createElement("a");a.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,4))),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},downloadSong:function(e){var t=document.createElement("a");t.setAttribute("href",e.media_url),t.setAttribute("target","_blank"),t.setAttribute("download",e.song+".mp4"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}},d=a(137),g=a(129),f={song:"Some Song",singers:"Some Singer",play_count:9999999,media_url:"",label:"Some Label",image:"https://images.unsplash.com/photo-1573247353133-0290e4606fbf?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60"};function p(e){var t=e.song,a=e.nextSong,l=e.prevSong,r=e.isMusicPlayerVisible,s=e.setIsMusicPlayerVisible;t||(t=f);var c=Object(n.useState)(!0),i=Object(m.a)(c,2),p=(i[0],i[1]),y=Object(n.useState)(.3),v=Object(m.a)(y,2),b=v[0],h=v[1],x=Object(n.useState)(0),E=Object(m.a)(x,2),N=E[0],S=E[1],w=Object(n.useState)(0),k=Object(m.a)(w,2),j=k[0],O=k[1],P=Object(n.useState)(new Audio),C=Object(m.a)(P,2),T=C[0],I=C[1];if(Object(n.useEffect)((function(){if(t){var e=new Audio(t.media_url);e.volume=b,I(e)}}),[t]),Object(n.useEffect)((function(){return T&&(T.onloadedmetadata=function(e){S(T.duration),O(T.currentTime),R()},T.onerror=function(e){e=T.error,console.log("Error "+T.error.code+"; details: "+T.error.message),2===e.code&&(T.src=t.media_url+"?v="+(new Date).getTime(),T.load(),T.play())},T.onwaiting=function(e){},T.onended=function(e){a()},T.ontimeupdate=function(e){O(e.target.currentTime)}),console.info("Player updated!"),function(){T.pause(),T.removeAttribute("src"),T.load()}}),[T]),!t||!T||!T.src)return o.a.createElement("span",null,"Please choose a song!");var R=function(){return p(!1),T.play()};return o.a.createElement("div",{onClick:function(){s(!1)},className:"MusicPlayer animated player p-5 "+(r?" visible-on-mobile":"")},o.a.createElement("div",{onClick:function(e){e.stopPropagation()},className:"player-card px-8 text-center bg-white p-3 rounded-lg"},o.a.createElement("div",{className:"beat-box mx-auto my-3 flex justify-center items-center",style:{width:"150px",height:"150px"}},o.a.createElement("img",{src:t.image,alt:t.song,style:{width:"150px",height:"150px"},className:"rounded-full shadow-lg mx-auto mb-5 "+(T.paused?"":"heart-beat")})),o.a.createElement("div",{className:"font-bold text-gray-800"},u.unescape(t.song)),o.a.createElement("div",{className:"text-gray-500 text-xs"},u.unescape(t.singers)),o.a.createElement(d.a,{value:u.completionPercentage(j,N),onChange:function(e,t){var a;a=N*(t/100),T.currentTime=a,O(a)}}),o.a.createElement("div",{className:"flex justify-between text-gray-500 text-xxs"},o.a.createElement("span",null,u.formatSeconds(j)),o.a.createElement("span",null,u.formatSeconds(N)))),o.a.createElement("div",{onClick:function(e){e.stopPropagation()},className:"flex player-card bg-white shadow rounded-lg justify-center mt-5"},o.a.createElement("div",{className:"flex items-center"},o.a.createElement("i",{className:"icon icon-to-start cursor-pointer text-gray-600 hover:text-red-500",title:"Play Previous",onClick:function(){l()}}),o.a.createElement("div",{className:"play-pause-overlay p-2 shadow rounded-full m-5"},T.paused?o.a.createElement("i",{className:"text-xl icon icon-play bg-white cursor-pointer text-gray-800 hover:bg-red-500 hover:text-white flex justify-center items-center rounded-full text-center w-10 h-10 play-button",title:"Play",onClick:function(){R()}}):o.a.createElement("i",{className:"text-xl icon icon-pause bg-white cursor-pointer text-gray-800 hover:bg-red-500 hover:text-white flex justify-center items-center rounded-full text-center w-10 h-10 pause-button",title:"Pause",onClick:function(){p(!0),T.pause()}})),o.a.createElement("i",{className:"icon icon-to-end cursor-pointer text-gray-600 hover:text-red-500",title:"Play Next",onClick:function(){a()}})),o.a.createElement("div",{className:"flex items-center text-xs text-gray-500"},o.a.createElement(g.a,{item:!0,xs:!0,style:{margin:"5px 0 0 1.25rem"}},o.a.createElement(d.a,{value:100*b,color:"primary",onChange:function(e,t){var a;a=t/100,T.volume=a,h(a)},"aria-labelledby":"continuous-slider",style:{width:"100px"}})))))}var y=a(37),v=a.n(y),b=a(136),h=a(134),x=a(135);function E(e){var t=e.recent,a=e.songIndex,n=e.playSong;return o.a.createElement("div",{className:"pr-5 cursor-pointer",title:"Play "+t.song,onClick:function(){n("Recent",a)}},o.a.createElement("div",{style:{height:"150px",width:"150px"},className:"mb-3"},o.a.createElement("img",{src:t.image_500?t.image_500:t.image,className:"shadow rounded-lg",alt:t.song})),o.a.createElement("div",{className:"text-gray-800 text-sm truncate"},o.a.createElement("div",{className:"font-bold"},u.unescape(t.song)),o.a.createElement("div",{className:"text-gray-500 text-xs"},"Album: ",u.unescape(t.album))))}var N=a(130),S=a(131);function w(e){var t=e.song,a=e.songIndex,l=e.playSong,r=e.playingList,s=e.selectedPlaylist,c=e.playlists,i=e.addToPlaylist,d=e.removeFromPlaylist,g=Object(n.useState)(!1),f=Object(m.a)(g,2),p=f[0],y=f[1];return o.a.createElement("div",{onMouseLeave:function(){p&&y(!1)},className:"PlaylistItem px-2 py-2 bg-white playlist-item rounded my-3 flex items-center hover:shadow-lg"},o.a.createElement("span",{className:"font-bold mx-3 w-4 hidden md:block"},a+1),o.a.createElement("img",{src:t.image,className:"rounded w-12 h-12 border",alt:t.song}),o.a.createElement("i",{className:"icon icon-play text-gray-300 mx-1",style:s===r[0]&&a===r[1]?{color:"red"}:{}}),o.a.createElement("div",{className:"flex-grow truncate"},o.a.createElement("div",{title:"Play "+t.song,className:"font-bold truncate md:w-56 md:flex-grow pr-3 md:flex-shrink-0 cursor-pointer truncate",onClick:function(){l(s,a)}},u.unescape(t.song)),o.a.createElement("div",{className:"flex"},o.a.createElement("div",{className:"text-gray-500 font-semibold pr-2 truncate md:flex-shrink-0"},u.unescape(t.singers)),o.a.createElement("div",{className:"text-gray-500 font-semibold md:w-24"},u.formatSeconds(t.duration)))),o.a.createElement("div",{className:"text-gray-500 font-semibold flex-shrink-0 cursor-pointer hidden md:block"},o.a.createElement(b.a,{className:"focus:outline-none",onClick:function(){i("Favorite",t)}},o.a.createElement(N.a,{htmlColor:t.isFavorite?"red":"#ddd",className:"favorite-maker"}))),o.a.createElement("div",{className:"text-gray-500 font-semibold flex-shrink-0 cursor-pointer relative"},o.a.createElement(b.a,{className:"focus:outline-none",onClick:function(){y(!p)}},o.a.createElement(S.a,{className:"favorite-maker"})),p&&o.a.createElement("div",{className:"item-menu bg-white shadow-lg py-2 rounded"},c.map((function(e){return o.a.createElement("button",{key:e,onClick:function(){i(e,t)},className:"px-3 py-2 text-left text-sm block w-full hover:bg-gray-200 focus:outline-none"},"Add to ",e)})),o.a.createElement("button",{className:"px-3 py-2 text-left text-sm block w-full hover:bg-gray-200 focus:outline-none",onClick:function(){u.downloadSong(t)}},"Download"),o.a.createElement("button",{className:"px-3 py-2 text-left text-sm block w-full hover:bg-gray-200 focus:outline-none",onClick:function(){d(s,t)}},"Remove"))))}var k=a(57),j=a.n(k);function O(e){var t=e.children,a={dots:!1,infinite:!0,slidesToShow:t.length>=4?4:t.length,slidesToScroll:1,responsive:[{breakpoint:1400,settings:{slidesToShow:t.length>=3?3:t.length,slidesToScroll:3}},{breakpoint:1200,settings:{slidesToShow:t.length>=2?2:t.length,slidesToScroll:2}},{breakpoint:720,settings:{slidesToShow:t.length>=3?3:t.length,slidesToScroll:3}},{breakpoint:640,settings:{slidesToShow:t.length>=2?2:t.length,slidesToScroll:2}}]};return o.a.createElement("div",{className:"RecentCarousal"},o.a.createElement(j.a,Object.assign({},a,{arrows:!0}),t))}var P=a(21),C=a.n(P),T=a(58),I=a.n(T),R=a(132);function A(e){var t=e.suggestion,a=e.playSong,l=e.playlists,r=(e.selectedPlaylist,e.addToPlaylist),s=(e.removeFromPlaylist,e.setIsFocused),c=Object(n.useState)(!1),i=Object(m.a)(c,2),d=i[0],g=i[1];return o.a.createElement("div",{onMouseLeave:function(){},className:"p-2 hover:bg-gray-100 animated flex items-center cursor-pointer"},o.a.createElement("div",{title:"Play "+t.song,className:"flex items-center justify-between flex-grow",onClick:function(e){a(t),e.stopPropagation(),s(!1)}},o.a.createElement("img",{src:t.image,className:"rounded w-12 h-12 border",alt:t.song}),o.a.createElement("div",{className:"flex-grow text-gray-800 text-xs truncate pl-2"},o.a.createElement("div",null,"Song: ",u.unescape(t.song)),o.a.createElement("div",null,"Album: ",u.unescape(t.album)),o.a.createElement("div",null,"Singers: ",u.unescape(t.singers)))),o.a.createElement("div",{className:"text-gray-500 font-semibold w-16 cursor-pointer relative"},o.a.createElement(b.a,{className:"focus:outline-none",onClick:function(){g(!d)}},o.a.createElement(S.a,{className:"favorite-maker"})),d&&o.a.createElement("div",{className:"item-menu bg-white shadow-lg py-2 rounded"},l.map((function(e){return o.a.createElement("button",{key:e,onClick:function(){r(e,t)},className:"px-3 py-2 text-left text-sm block w-full hover:bg-gray-200 focus:outline-none"},"Add to ",e)})),o.a.createElement("button",{className:"px-3 py-2 text-left text-sm block w-full hover:bg-gray-200 focus:outline-none",onClick:function(){u.downloadSong(t)}},"Download"))))}var F="https://pru-saavn.herokuapp.com/api",M={search:function(e){return"https://pru-saavn.herokuapp.com/socket/search?query="+e},signIn:F+"/google-signin",syncUp:F+"/sync-up",syncDown:F+"/sync-down"};function L(e){var t=e.size,a=void 0===t?"48px":t,n=e.color,l=void 0===n?"#202020":n,r=e.className,s=void 0===r?"":r;return o.a.createElement("div",{className:s},o.a.createElement("span",{className:"spinner",style:{width:a,height:a,borderRightColor:l}}))}function z(e){var t=e.suggestions,a=e.setSuggestions,l=e.addToPlaylist,r=e.playSong,s=(e.playingList,e.selectedPlaylist),c=e.playlists,i=e.removeFromPlaylist,u=(e.isSidebarOpen,e.setIsSidebarOpen,e.isMusicPlayerVisible,e.setIsMusicPlayerVisible,Object(n.useState)(!1)),d=Object(m.a)(u,2),g=d[0],f=d[1],p=Object(n.useState)(!1),y=Object(m.a)(p,2),v=y[0],h=y[1],x=Object(n.useState)(""),E=Object(m.a)(x,2),N=E[0],S=E[1],w=Object(n.useCallback)(I()((function(e){f(!0),C.a.get(M.search(e)).then((function(e){a(e.data),f(!1)}))}),1e3),[]),k=function(e){S(""),a([]),h(!1)};Object(n.useEffect)((function(){!v&&t.length>0&&k()}),[v,t.length]);var j=function(e){k();var t=l("Recent",e);Number.isInteger(t)&&r("Recent",t)};return o.a.createElement("div",{onMouseLeave:function(){k(),h(!1)},onClick:function(){h(!1)},className:"SearchBox animated md:px-10 search-box w-full md:w-1/2 flex items-center "+(v?"focused ":"")+(t.length>0?"has-suggestions":"")},o.a.createElement("input",{value:N,className:"border px-3 py-2 m:py-3 m:px-5 w-full focus:outline-none flex-grow",style:t.length>0?{borderTopLeftRadius:"0.5em",borderTopRightRadius:"0.5em",borderBottom:"none"}:{borderRadius:"2em"},placeholder:"Search...",onClick:function(e){h(!0),e.stopPropagation()},onChange:function(e){var t=e.target.value;S(t),t.trim()?w(t):w.cancel()}}),g?o.a.createElement(L,{size:"24px",className:"loading-suggestion"}):t.length>0?o.a.createElement(b.a,{className:"clear-suggestion focus:outline-none",title:"Clear Suggestions",onClick:function(e){k(),e.stopPropagation()}},o.a.createElement(R.a,{fontSize:"small"})):o.a.createElement("span",null),t.length>0&&o.a.createElement("div",{className:"suggestion-box rounded-lg px-10 w-full md:w-1/2"},o.a.createElement("div",{className:"bg-white py-2 shadow-lg border"},g?o.a.createElement(L,{size:"24px",className:"mt-2 w-full flex justify-center"}):t.map((function(e){return o.a.createElement(A,{suggestion:e,playSong:j,key:e.id,playlists:c,selectedPlaylist:s,addToPlaylist:l,removeFromPlaylist:i,setIsFocused:h})})))))}var _=a(133);function J(e){var t=e.buttons,a=void 0===t?[]:t,l=e.small,r=void 0!==l&&l,s=e.onClick,c=void 0===s?function(e){}:s,i=Object(n.useState)(!1),u=Object(m.a)(i,2),d=u[0],g=u[1];return o.a.createElement("span",{onMouseLeave:function(){g(!1)},onClick:c,className:"text-gray-500 font-semibold cursor-pointer relative"},o.a.createElement(b.a,{className:"focus:outline-none",size:r?"small":"medium",onClick:function(){g(!d)}},o.a.createElement(S.a,{className:"favorite-maker"})),d&&o.a.createElement("div",{className:"item-menu bg-white shadow-lg py-2 rounded"},a.map((function(e,t){return o.a.createElement("button",{key:t,onClick:function(){e.action()},className:"px-3 py-2 text-left text-sm block w-full hover:bg-gray-200 focus:outline-none"},e.label)}))))}var W=o.a.createContext(null),B=function(e){return function(t){return o.a.createElement(W.Consumer,null,(function(a){return o.a.createElement(e,Object.assign({},a,t))}))}},D=B((function(e){var t=e.toasts,a=e.removeToast;return o.a.createElement("div",{className:"ToastNotifier"},t.map((function(e){return o.a.createElement("div",{className:"toast items-center flex pl-4 pr-2 py-1 mt-2 rounded text-white shadow text-xs "+(e.type?e.type:"default"),key:e.timestamp},o.a.createElement("div",{className:"toast-body flex-grow pr-2"},o.a.createElement("div",{className:"toast-title"},e.title),o.a.createElement("div",{className:"toast-message"},e.message)),o.a.createElement(b.a,{className:"focus:outline-none toast-close-button",title:"Clear Toast",onClick:function(){a(e)}},o.a.createElement(R.a,{fontSize:"small",htmlColor:"white"})))})))})),V="68653039486-63iqbma47tvrijkuiqbo23gpdc4mbejl.apps.googleusercontent.com",U=a(59),q=a.n(U);function H(e){var t=e.onSignIn,a=e.onSignInError,n=e.user,l=e.syncToServer,r=e.syncFromServer;return o.a.createElement("span",{className:"px-4 pt-6"},n?o.a.createElement("div",{className:"relative"},o.a.createElement("div",{className:"px-2 mx-2 py-1 cursor-pointer"},o.a.createElement("div",{className:"flex flex-col items-center"},o.a.createElement("img",{src:n.picture,className:"rounded-full w-32 h-32 shadow-lg",alt:n.name}),o.a.createElement("div",{className:"font-bold text-gray-800 text-xl mt-5 text-center"},n.name),o.a.createElement("div",{className:"text-gray-500 text-center"},n.email))),o.a.createElement("div",{className:"bg-white rounded text-gray-800 py-2 px-4"},o.a.createElement("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer rounded mb-2",title:"Sync playlist to server",onClick:function(){l()}},"Sync to server"),o.a.createElement("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer rounded mb-2",title:"Sync playlist to server",onClick:function(){r()}},"Sync from server"))):o.a.createElement("div",{className:"px-2 mx-2"},o.a.createElement("div",{className:"flex flex-col items-center"},o.a.createElement("img",{src:"https://avatars2.githubusercontent.com/u/20546147?s=460&v=4",className:"rounded-full w-32 h-32 shadow-lg",alt:"Saavn Pru"}),o.a.createElement("div",{className:"font-bold text-gray-800 text-xl mt-5 text-center"},"Saavn Pru"),o.a.createElement("div",{className:"text-gray-500 text-center mb-3"},"thefallenmerc@gmail.com"),o.a.createElement(q.a,{clientId:V,buttonText:"Login",onSuccess:t,render:function(e){return o.a.createElement("button",{className:"px-2 mx-2 rounded py-1 cursor-pointer shadow "+(e.disabled?"bg-gray-200 text-gray-500":"bg-blue-500 text-white"),onClick:e.onClick,disabled:e.disabled},"Login")},onFailure:a,isSignedIn:!0,cookiePolicy:"single_host_origin"}))))}var K=B((function(e){var t=e.onSignIn,a=e.onSignInError,l=e.user,r=e.syncToServer,s=e.syncFromServer,c=e.playlists,i=e.addPlaylist,u=e.removePlaylist,d=e.selectPlaylist,g=e.selectedPlaylist,f=(e.addToast,e.isSidebarOpen),p=e.closeSidebar,y=Object(n.useState)(""),v=Object(m.a)(y,2),h=v[0],x=v[1];return o.a.createElement("div",{className:"Sidebar sidebar animated bg-white pt-2 pb-10 "+(f?"":"closed")},o.a.createElement(H,{onSignIn:t,onSignInError:a,syncToServer:r,syncFromServer:s,user:l}),o.a.createElement("div",{className:"px-4"},o.a.createElement("div",{className:"px-4 mb-5 uppercase font-bold text-gray-500"},"My Music"),Object.keys(c).map((function(e){return o.a.createElement("div",{className:"px-4 text-gray-800 flex justify-between items-center font-bold py-2 hover:bg-gray-300 my-1 rounded-lg cursor-pointer "+(e===g?"bg-gray-300":""),onClick:function(){d(e),p()},key:e},o.a.createElement("span",null,e),o.a.createElement(J,{onClick:function(e){return e.stopPropagation()},small:!0,buttons:[{action:function(){!function(e){d(e)}("Recent"),u(e)},label:"Remove"}]}))})),o.a.createElement("div",{className:"relative"},o.a.createElement("input",{className:"px-4 text-gray-800 font-bold py-2 my-2 bg-gray-100 rounded-lg focus:outline-none",placeholder:"Add playlist...",value:h,onKeyDown:function(e){"Enter"===e.key&&e.target.value.length>0&&(i(h),x(""))},onChange:function(e){x(e.target.value)}}),h&&o.a.createElement(b.a,{size:"small",className:"focus:outline-none",onClick:function(){i(h),x("")},style:{position:"absolute",right:"15px",top:"13px"}},o.a.createElement(_.a,null)))))}));var Q=function(){var e=Object(n.useState)(null),t=Object(m.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(["Recent",0]),u=Object(m.a)(r,2),d=u[0],g=u[1],f=Object(n.useState)("Recent"),y=Object(m.a)(f,2),N=y[0],S=y[1],k=Object(n.useState)([]),j=Object(m.a)(k,2),P=j[0],T=j[1],I=Object(n.useState)({Recent:[],Favorite:[]}),R=Object(m.a)(I,2),A=R[0],F=R[1],L=Object(n.useState)([]),_=Object(m.a)(L,2),J=_[0],B=_[1],V=[],U=Object(n.useState)(!1),q=Object(m.a)(U,2),H=q[0],Q=q[1],$=Object(n.useState)(!1),G=Object(m.a)($,2),X=G[0],Y=G[1],Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];console.log("updating",Object(i.a)(Object(i.a)({},A),{},Object(c.a)({},e,t))),ee(Object(i.a)(Object(i.a)({},A),{},Object(c.a)({},e,t))),oe("Updated "+e)},ee=function(e){localStorage.setItem("playlists",JSON.stringify(e)),F(e)},te=function(e,t){if(e in A){var a=A[e],n=A[e].findIndex((function(e){return e.id===t.id}));return n<0?(Z(e,[].concat(Object(s.a)(a),[t])),"Recent"!==e&&oe("Added "+t.song+" to "+e),a.length):n}},ae=function(e,t){if(e in A){var a=A[e].findIndex((function(e){return e.id===t.id}));if(a>-1){var n=A[e];n.splice(a,1),Z(e,n),oe("Removed "+t.song+" from "+e)}}},ne=function(e,t){console.log("playing",e,t),g([e,t]);try{var a=A[e][t];a&&-1===A.Recent.findIndex((function(e){return e.id===a.id}))&&te("Recent",a)}catch(n){console.log("adding to recent failed at playSong")}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",n={title:e,message:t,type:a,timestamp:(new Date).getTime()+Math.random()};B([].concat(Object(s.a)(J),[n])),V.push(setTimeout((function(){le(n)}),3e3))},le=function(e){var t=Object(s.a)(J);t.splice(t.find((function(t){return t.timestamp===e.timestamp})),1),B(t)};return Object(n.useEffect)((function(){var e=localStorage.getItem("playlists"),t=[],a=[],n={};try{var o=JSON.parse(e);if(o&&"object"===typeof o)for(var l in"Recent"in o&&(t=o.Recent,delete o.Recent),"Favorite"in o&&(a=o.Favorite,delete o.Favorite),o)n[l]=o[l]}catch(r){}n.Recent=t,n.Favorite=a,localStorage.setItem("playlists",JSON.stringify(n)),F(n)}),[]),Object(n.useEffect)((function(){return function(){V.forEach((function(e){clearTimeout(e)}))}}),[]),Object(n.useEffect)((function(){"Recent"===N&&A[N]&&0===A[N].length&&oe("It looks lonely here","Maybe, Try searching a song.")}),[N]),o.a.createElement(W.Provider,{value:{toasts:J,addToast:oe,removeToast:le}},o.a.createElement("div",{className:"App bg-gray-100"},o.a.createElement(K,{onSignIn:function(e){C.a.get(M.signIn,{headers:{Authorization:"Bearer "+e.tokenId}}).then((function(e){var t=e.data.user;l(t),localStorage.setItem("user",JSON.stringify(t)),oe("Signed in as "+t.name,"","success")})).catch((function(e){oe("Couldn't auto signin!","","danger"),console.log({error:e})}))},onSignInError:function(e){console.error(e),oe("Could not sign you in!")},syncToServer:function(){oe("Sync to server initiated"),C.a.post(M.syncUp,{playlists:A},{headers:{Authorization:"Bearer "+a.token}}).then((function(e){oe("Synced to server","","success")})).catch((function(e){oe("Couldn't sync to server!"),console.error(e)}))},syncFromServer:function(){oe("Sync from server initiated"),C.a.get(M.syncDown,{headers:{Authorization:"Bearer "+a.token}}).then((function(e){var t=e.data;ee(t.playlists),oe("Synced from server","","success")})).catch((function(e){oe("Couldn't sync from server!"),console.error(e)}))},user:a,playlists:A,addPlaylist:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=Object(i.a)(Object(i.a)({},A),{},Object(c.a)({},e,t));ee(a),oe('Added playlist "'+e+'"')},selectedPlaylist:N,removePlaylist:function(e){if(e in A&&!["Recent","Favorite"].includes(e)){var t=Object(i.a)({},A);delete t[e],console.log("updating",t),ee(t),N===e&&S("Recent"),oe('Removed playlist "'+e+'"!')}},selectPlaylist:function(e){S(e)},isSidebarOpen:H,closeSidebar:function(e){Q(!1)}}),o.a.createElement("div",{className:"main animated "+(H?"":"sidebar-closed")},o.a.createElement("div",{className:"top-bar animated flex box-border justify-start items-center p-2 md:pt-6"},o.a.createElement("div",{className:"mr-2"},H?o.a.createElement(b.a,{className:"focus:outline-none",onClick:function(){Q(!H)}},o.a.createElement(v.a,null)):o.a.createElement(b.a,{className:"focus:outline-none",onClick:function(){Q(!H)}},o.a.createElement(h.a,null))),o.a.createElement(z,{suggestions:P,setSuggestions:T,addToPlaylist:te,playSong:ne,playingList:d,selectedPlaylist:N,playlists:Object.keys(A),removeFromPlaylist:ae,isSidebarOpen:H,setIsSidebarOpen:Q,isMusicPlayerVisible:X,setIsMusicPlayerVisible:Y}),o.a.createElement("div",{className:"ml-2 md:hidden"},o.a.createElement(b.a,{className:"focus:outline-none",onClick:function(){Y(!X)}},o.a.createElement(x.a,null)))),o.a.createElement("div",{className:"px-2 md:pl-10 md:pr-0 pt-3 md:flex pb-48"},o.a.createElement("div",{className:"md:w-3/5 w-full"},A.Recent.length>0&&o.a.createElement("div",null,o.a.createElement("div",{className:"flex items-center"},o.a.createElement("span",{className:"text-xl font-bold text-gray-800 mr-3"},"Recent Played"),o.a.createElement(b.a,{typeof:"danger",className:"focus:outline-none",onClick:function(){A.Recent.length>0&&(Z("Recent",[]),oe('Cleared "Recent"'))}},o.a.createElement(v.a,{fontSize:"small"}))),o.a.createElement("div",{className:"mt-3"},o.a.createElement(O,null,A.Recent.map((function(e,t){return o.a.createElement(E,{recent:e,songIndex:t,playSong:ne,key:e.id})}))))),o.a.createElement("div",{className:"py-5"},o.a.createElement("h1",{className:"text-xl font-bold text-gray-800"},N||"No playlist selected"),o.a.createElement("span",{className:"font-bold text-gray-500 text-xs"},N&&A[N]?A[N].length:"0"," Song(s)"),o.a.createElement("div",{className:"py-2"},N&&A[N]&&A[N].map((function(e,t){return o.a.createElement(w,{song:e,songIndex:t,playSong:ne,key:e.id,playingList:d,selectedPlaylist:N,playlists:Object.keys(A),addToPlaylist:te,removeFromPlaylist:ae})}))))),o.a.createElement("div",{className:"md:w-2/5 w-full px-5"},o.a.createElement("h1",{className:"text-xl md:block hidden font-bold text-gray-800"},"Now Playing > ",d[0]),o.a.createElement("span",{className:"font-bold md:block hidden text-gray-500 text-xs"},A[d[0]].length," Song(s) on the list"),o.a.createElement("div",{className:"py-2"},o.a.createElement(p,{song:A[d[0]][d[1]],nextSong:function(){var e=Object(m.a)(d,2),t=e[0],a=e[1];a===A[t].length-1?g([t,0]):g([t,a+1]),oe("Playing next song")},prevSong:function(){var e=Object(m.a)(d,2),t=e[0],a=e[1];g(0===a?[t,A[t].length-1]:[t,a-1]),oe("Playing previous song")},isMusicPlayerVisible:X,setIsMusicPlayerVisible:Y})))))),o.a.createElement(D,null))},$=(a(114),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function G(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Q,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");$?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):G(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):G(t,e)}))}}()},63:function(e,t,a){e.exports=a(115)}},[[63,1,2]]]);
//# sourceMappingURL=main.4af21dcc.chunk.js.map