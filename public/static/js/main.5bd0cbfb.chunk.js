(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{113:function(e,t,a){},114:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(15),c=a.n(r),s=a(57),o=a(18),i=a(14),m=a(4),u={unescape:function(e){var t=document.createElement("span");return t.innerHTML=e,t.innerText},formatSeconds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=parseInt(e/60).toString(),a=parseInt(e%60).toString();return t.length<2&&(t="0".repeat(2-t.length)+t),a.length<2&&(a="0".repeat(2-a.length)+a),t+":"+a},completionPercentage:function(e,t){return e/t*100}},d=a(133),g=a(128),f={song:"Some Song",singers:"Some Singer",play_count:9999999,media_url:"",label:"Some Label",image:"https://images.unsplash.com/photo-1573247353133-0290e4606fbf?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60"};function p(e){var t=e.song,a=e.nextSong,r=e.prevSong;t||(t=f);var c=Object(n.useState)(!0),s=Object(m.a)(c,2),o=(s[0],s[1]),i=Object(n.useState)(.3),p=Object(m.a)(i,2),v=p[0],y=p[1],x=Object(n.useState)(0),b=Object(m.a)(x,2),h=b[0],E=b[1],N=Object(n.useState)(0),w=Object(m.a)(N,2),S=w[0],j=w[1],O=Object(n.useState)(new Audio),k=Object(m.a)(O,2),P=k[0],C=k[1];if(Object(n.useEffect)((function(){if(t){var e=new Audio(t.media_url);e.volume=v,C(e)}}),[t]),Object(n.useEffect)((function(){return P&&(P.onloadedmetadata=function(e){E(P.duration),j(P.currentTime),R()},P.onerror=function(e){e=P.error,console.log("Error "+P.error.code+"; details: "+P.error.message),2===e.code&&(P.src=t.media_url+"?v="+(new Date).getTime(),P.load(),P.play())},P.ontimeupdate=function(e){j(e.target.currentTime)}),console.info("Player updated!"),function(){P.pause(),P.removeAttribute("src"),P.load()}}),[P]),!t||!P||!P.src)return l.a.createElement("span",null,"Please choose a song!");var R=function(){return o(!1),P.play()};return l.a.createElement("div",{className:"player bg-white shadow rounded-lg p-5"},l.a.createElement("div",{className:"player-card px-8 text-center bg-white p-3 rounded-lg"},l.a.createElement("div",{className:"beat-box mx-auto my-3 flex justify-center items-center",style:{width:"150px",height:"150px"}},l.a.createElement("img",{src:t.image,style:{width:"150px",height:"150px"},className:"rounded-full shadow-lg mx-auto mb-5 "+(P.paused?"":"heart-beat")})),l.a.createElement("div",{className:"font-bold text-gray-800"},u.unescape(t.song)),l.a.createElement("div",{className:"text-gray-500 text-xs"},u.unescape(t.singers)),l.a.createElement(d.a,{value:u.completionPercentage(S,h),onChange:function(e,t){var a;a=h*(t/100),P.currentTime=a,j(a)}}),l.a.createElement("div",{className:"flex justify-between text-gray-500 text-xxs"},l.a.createElement("span",null,u.formatSeconds(S)),l.a.createElement("span",null,u.formatSeconds(h)))),l.a.createElement("div",{className:"flex justify-center mt-4"},l.a.createElement("div",{className:"flex items-center"},l.a.createElement("i",{className:"icon icon-to-start cursor-pointer text-gray-600 hover:text-red-500",title:"Play Previous",onClick:function(){r()}}),l.a.createElement("div",{className:"play-pause-overlay p-2 shadow rounded-full m-5"},P.paused?l.a.createElement("i",{className:"text-xl icon icon-play bg-white cursor-pointer text-gray-800 hover:bg-red-500 hover:text-white flex justify-center items-center rounded-full text-center w-10 h-10 play-button",title:"Play",onClick:function(){R()}}):l.a.createElement("i",{className:"text-xl icon icon-pause bg-white cursor-pointer text-gray-800 hover:bg-red-500 hover:text-white flex justify-center items-center rounded-full text-center w-10 h-10 pause-button",title:"Pause",onClick:function(){o(!0),P.pause()}})),l.a.createElement("i",{className:"icon icon-to-end cursor-pointer text-gray-600 hover:text-red-500",title:"Play Next",onClick:function(){a()}})),l.a.createElement("div",{className:"flex items-center text-xs text-gray-500"},l.a.createElement(g.a,{item:!0,xs:!0,style:{margin:"5px 0 0 1.25rem"}},l.a.createElement(d.a,{value:100*v,color:"primary",onChange:function(e,t){var a;a=t/100,P.volume=a,y(a)},"aria-labelledby":"continuous-slider",style:{width:"100px"}})))))}var v=a(31),y=a.n(v),x=a(132);function b(e){var t=e.recent,a=e.playSong;return l.a.createElement("div",{className:"pr-5 cursor-pointer",title:"Play "+t.song,onClick:function(){a(t)}},l.a.createElement("div",{style:{height:"150px",width:"150px"},className:"mb-3"},l.a.createElement("img",{src:t.image_500?t.image_500:t.image,className:"shadow rounded-lg"})),l.a.createElement("div",{className:"text-gray-800 text-sm truncate"},l.a.createElement("div",{className:"font-bold"},u.unescape(t.song)),l.a.createElement("div",{className:"text-gray-500 text-xs"},"Album: ",u.unescape(t.album))))}var h=a(129),E=a(130);function N(e){var t=e.song,a=e.songIndex,r=e.playSong,c=e.selectedPlaylist,s=e.playlists,o=e.addToPlaylist,i=e.removeFromPlaylist,d=Object(n.useState)(!1),g=Object(m.a)(d,2),f=g[0],p=g[1];return l.a.createElement("div",{onMouseLeave:function(){f&&p(!1)},className:"px-2 py-2 bg-white playlist-item rounded my-3 flex items-center hover:shadow-lg"},l.a.createElement("span",{className:"font-bold mx-3"},"01"),l.a.createElement("img",{src:t.image,className:"rounded w-12 h-12 border"}),l.a.createElement("i",{className:"icon icon-play text-gray-300 mx-1"}),l.a.createElement("div",{title:"Play "+t.song,className:"font-bold truncate w-56 flex-grow pr-3 flex-shrink-0 cursor-pointer",onClick:function(){r(c,a)}},t.song),l.a.createElement("div",{className:"text-gray-500 font-semibold w-48 truncate flex-shrink-0"},t.singers),l.a.createElement("div",{className:"text-gray-500 font-semibold w-24"},u.formatSeconds(t.duration)),l.a.createElement("div",{className:"text-gray-500 font-semibold w-16 cursor-pointer"},l.a.createElement(x.a,{className:"focus:outline-none",onClick:function(){o("Favorite",t)}},l.a.createElement(h.a,{htmlColor:t.isFavorite?"red":"#ddd",className:"favorite-maker"}))),l.a.createElement("div",{className:"text-gray-500 font-semibold w-16 cursor-pointer relative"},l.a.createElement(x.a,{className:"focus:outline-none",onClick:function(){p(!f)}},l.a.createElement(E.a,{className:"favorite-maker"})),f&&l.a.createElement("div",{className:"playlist-item-menu bg-white shadow-lg py-2 rounded"},s.map((function(e){return l.a.createElement("button",{key:e,onClick:function(){o(e,t)},className:"px-3 py-2 text-left text-sm block w-full hover:bg-gray-200 focus:outline-none"},"Add to ",e)})),l.a.createElement("button",{className:"px-3 py-2 text-left text-sm block w-full hover:bg-gray-200",onClick:function(){i(c,t)}},"Remove"))))}var w=a(54),S=a.n(w);function j(e){var t=e.children,a={dots:!1,infinite:!0,slidesToShow:t.length>=4?4:t.length,slidesToScroll:1};return l.a.createElement("div",null,l.a.createElement(S.a,Object.assign({},a,{arrows:!0}),t))}var O=a(55),k=a.n(O),P=a(56),C=a.n(P);function R(e){var t=e.suggestion,a=e.playSong;return l.a.createElement("div",{className:"p-2 hover:bg-gray-100 animated flex items-center cursor-pointer",title:"Play "+t.song,onClick:function(){a(t)}},l.a.createElement("img",{src:t.image,className:"rounded w-12 h-12 border"}),l.a.createElement("div",{className:"flex-grow text-gray-800 text-xs truncate pl-2"},l.a.createElement("div",null,"Song: ",t.song),l.a.createElement("div",null,"Album: ",t.album),l.a.createElement("div",null,"Singers: ",t.singers)))}var T={search:function(e){return"http://localhost:3100/api/search?query="+e}};function I(e){var t=e.size,a=void 0===t?"48px":t,n=e.color,r=void 0===n?"#202020":n,c=e.className,s=void 0===c?"":c;return l.a.createElement("div",{className:s},l.a.createElement("span",{className:"spinner",style:{width:a,height:a,borderRightColor:r}}))}function F(e){var t=e.suggestions,a=e.setSuggestions,r=e.addToPlaylist,c=e.playSong,s=Object(n.useState)(!1),o=Object(m.a)(s,2),i=o[0],u=o[1],d=Object(n.useState)(""),g=Object(m.a)(d,2),f=g[0],p=g[1],v=Object(n.useCallback)(C()((function(e){u(!0),k.a.get(T.search(e)).then((function(e){a(e.data),u(!1)}))}),1e3),[]),b=function(e){p(""),a([])},h=function(e){b();var t=r("Recent",e);Number.isInteger(t)&&c("Recent",t)};return l.a.createElement("div",{onMouseLeave:function(){b()},className:"pt-6 py-2 px-10 search-box"},l.a.createElement("input",{value:f,className:"border py-3 px-5 w-full md:w-1/2 focus:outline-none",style:t.length>0?{borderTopLeftRadius:"0.5em",borderTopRightRadius:"0.5em",borderBottom:"none"}:{borderRadius:"2em"},placeholder:"Search...",onChange:function(e){var t=e.target.value;p(t),t.trim()?v(t):v.cancel()}}),i?l.a.createElement(I,{size:"24px",className:"loading-suggestion"}):t.length>0?l.a.createElement(x.a,{className:"clear-suggestion focus:outline-none",title:"Clear Suggestions",onClick:function(){b()}},l.a.createElement(y.a,{fontSize:"small"})):l.a.createElement("span",null),t.length>0&&l.a.createElement("div",{className:"suggestion-box rounded-lg pr-10 w-full md:w-1/2"},l.a.createElement("div",{className:"bg-white py-2 shadow-lg border"},i?l.a.createElement(I,{size:"24px",className:"mt-2 w-full flex justify-center"}):t.map((function(e){return l.a.createElement(R,{suggestion:e,playSong:h,key:e.id})})))))}var A=a(131);function M(e){var t=e.playlists,a=e.addPlaylist,r=e.selectPlaylist,c=e.selectedPlaylist,s=Object(n.useState)(""),o=Object(m.a)(s,2),i=o[0],u=o[1];return l.a.createElement("div",{className:"sidebar bg-white"},l.a.createElement("div",{className:"p-10 flex flex-col items-center"},l.a.createElement("img",{src:"https://avatars2.githubusercontent.com/u/20546147?s=460&v=4",className:"rounded-full w-32 h-32 shadow-lg"}),l.a.createElement("div",{className:"font-bold text-gray-800 text-xl mt-5 text-center"},"Chahar"),l.a.createElement("div",{className:"text-gray-500 text-center"},"chaharshubhamsingh")),l.a.createElement("div",{className:"px-4"},l.a.createElement("div",{className:"px-4 mb-5 uppercase font-bold text-gray-500"},"My Music"),Object.keys(t).map((function(e){return l.a.createElement("div",{className:"px-4 text-gray-800 font-bold py-2 hover:bg-gray-300 my-1 rounded-lg cursor-pointer "+(e===c?"bg-gray-300":""),onClick:function(){r(e)},key:e},e)})),l.a.createElement("div",{className:"relative"},l.a.createElement("input",{className:"px-4 text-gray-800 font-bold py-2 my-2 bg-gray-100 rounded-lg focus:outline-none",placeholder:"Add playlist...",value:i,onChange:function(e){u(e.target.value)}}),i&&l.a.createElement(x.a,{size:"small",className:"focus:outline-none",onClick:function(){a(i),u("")},style:{position:"absolute",right:"15px",top:"13px"}},l.a.createElement(A.a,null)))))}var z=function(){var e=Object(n.useState)(["Recent",0]),t=Object(m.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)("Recent"),u=Object(m.a)(c,2),d=u[0],g=u[1],f=Object(n.useState)([]),v=Object(m.a)(f,2),h=v[0],E=v[1],w=Object(n.useState)({Recent:[],Favorite:[]}),S=Object(m.a)(w,2),O=S[0],k=S[1],P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];console.log("updating",Object(i.a)(Object(i.a)({},O),{},Object(o.a)({},e,t))),C(Object(i.a)(Object(i.a)({},O),{},Object(o.a)({},e,t)))},C=function(e){localStorage.setItem("playlists",JSON.stringify(e)),k(e)},R=function(e,t){if(e in O){var a=O[e],n=O[e].findIndex((function(e){return e.id===t.id}));return n<0?(P(e,[].concat(Object(s.a)(a),[t])),a.length):n}},T=function(e,t){if(e in O){var a=O[e].findIndex((function(e){return e.id===t.id}));if(a>-1){var n=O[e];n.splice(a,1),P(e,n)}}},I=function(e,t){r([e,t]);try{var a=O[e][t];a&&-1===O.Recent.findIndex((function(e){return e.id===a.id}))&&R("Recent",a)}catch(n){console.log("adding to recent failed at playSong")}};return Object(n.useEffect)((function(){var e=localStorage.getItem("playlists"),t=[],a=[],n={};try{var l=JSON.parse(e);if(l&&"object"===typeof l)for(var r in"Recent"in l&&(t=l.Recent,delete l.Recent),"Favorite"in l&&(a=l.Favorite,delete l.Favorite),l)n[r]=l[r]}catch(c){}n.Recent=t,n.Favorite=a,localStorage.setItem("playlists",JSON.stringify(n)),k(n)}),[]),l.a.createElement("div",{className:"bg-gray-100"},l.a.createElement(M,{playlists:O,addPlaylist:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=Object(i.a)(Object(i.a)({},O),{},Object(o.a)({},e,t));C(a)},selectedPlaylist:d,selectPlaylist:function(e){g(e)}}),l.a.createElement("div",{className:"main"},l.a.createElement(F,{suggestions:h,setSuggestions:E,addToPlaylist:R,playSong:I}),l.a.createElement("div",{className:"pl-10 pt-3 flex pb-48"},l.a.createElement("div",{className:"md:w-3/5 w-full"},O.Recent.length>0&&l.a.createElement("div",null,l.a.createElement("div",{className:"flex items-center"},l.a.createElement("span",{className:"text-xl font-bold text-gray-800 mr-3"},"Recent Played"),l.a.createElement(x.a,{typeof:"danger",className:"focus:outline-none",onClick:function(){O.Recent.length>0&&P("Recent",[])}},l.a.createElement(y.a,{fontSize:"small"}))),l.a.createElement("div",{className:"mt-3"},l.a.createElement(j,null,O.Recent.map((function(e){return l.a.createElement(b,{recent:e,playSong:I,key:e.id})}))))),l.a.createElement("div",{className:"py-5"},l.a.createElement("h1",{className:"text-xl font-bold text-gray-800"},d||"No playlist selected"),l.a.createElement("span",{className:"font-bold text-gray-500 text-xs"},d?O[d].length:"0"," Song(s)"),l.a.createElement("div",{className:"py-2"},d&&O[d].map((function(e,t){return l.a.createElement(N,{song:e,songIndex:t,playSong:I,key:e.id,selectedPlaylist:d,playlists:Object.keys(O),addToPlaylist:R,removeFromPlaylist:T})}))))),l.a.createElement("div",{className:"md:w-2/5 w-full px-5"},l.a.createElement("h1",{className:"text-xl font-bold text-gray-800"},"Now Playing"),l.a.createElement("span",{className:"font-bold text-gray-500 text-xs"},"50 Songs on the list"),l.a.createElement("div",{className:"py-2"},l.a.createElement(p,{song:O[a[0]][a[1]],nextSong:function(){var e=Object(m.a)(a,2),t=e[0],n=e[1];n===O[t].length-1?r([t,0]):r([t,n+1])},prevSong:function(){var e=Object(m.a)(a,2),t=e[0],n=e[1];r(0===n?[t,O[t].length-1]:[t,n-1])}}))))))};a(113),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},62:function(e,t,a){e.exports=a(114)}},[[62,1,2]]]);
//# sourceMappingURL=main.5bd0cbfb.chunk.js.map